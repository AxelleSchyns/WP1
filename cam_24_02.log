-----------------------------------------------------------------------------------------------
------------------------------------- ResNet  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/resnet/model2/last_epoch
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.209162950515747
Time of the transfer: 35.19384694099426
Time of the indexing: 5.911785125732422
T_indexing = 47.38963580131531
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.7300595920238369
top-5 accuracy :  0.8973756589502636
maj accuracy class :  0.756589502635801
f1 score :  0.7300595920238369
t_tot: 91.45849275588989
t_model: 67.02099251747131
t_transfer: 0.8342266082763672
t_search: 20.319700241088867
-----------------------------------------------------------------------------------------------
------------------------------------- DeiT  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/deit/model5/last_epoch
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.6711721420288086
Time of the transfer: 91.99024701118469
Time of the indexing: 4.0445404052734375
T_indexing = 102.09288191795349
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.6912388264955306
top-5 accuracy :  0.8901558560623424
maj accuracy class :  0.7178260371304148
f1 score :  0.6912388264955306
t_tot: 115.91890549659729
t_model: 69.70034217834473
t_transfer: 22.356853485107422
t_search: 20.473570346832275
-----------------------------------------------------------------------------------------------
------------------------------------- DINO pre  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model11/dino_deitsmall16_pretrain.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model11/dino_deitsmall16_pretrain.pth and loaded with msg: <All keys matched successfully>
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.9664556980133057
Time of the transfer: 33.849183082580566
Time of the indexing: 5.776561260223389
T_indexing = 45.86039471626282
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model11/dino_deitsmall16_pretrain.pth and loaded with msg: <All keys matched successfully>
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.7224673389869356
top-5 accuracy :  0.87517190006876
maj accuracy class :  0.7409752463900986
f1 score :  0.7224673389869356
t_tot: 96.93513584136963
t_model: 69.26726603507996
t_transfer: 0.734215497970581
t_search: 23.676946878433228
-----------------------------------------------------------------------------------------------
------------------------------------- DINO fine  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model13/checkpoint0099_pretrained.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model13/checkpoint0099_pretrained.pth and loaded with msg: <All keys matched successfully>
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.6132965087890625
Time of the transfer: 32.62331700325012
Time of the indexing: 4.919646978378296
T_indexing = 43.98423385620117
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model13/checkpoint0099_pretrained.pth and loaded with msg: <All keys matched successfully>
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.769080907632363
top-5 accuracy :  0.8854286041714416
maj accuracy class :  0.7909981663992666
f1 score :  0.769080907632363
t_tot: 97.3438823223114
t_model: 69.98412919044495
t_transfer: 0.5963683128356934
t_search: 23.52736520767212
-----------------------------------------------------------------------------------------------
------------------------------------- DINO scratch  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model12/checkpoint0099_scratch.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model12/checkpoint0099_scratch.pth and loaded with msg: <All keys matched successfully>
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.6160085201263428
Time of the transfer: 32.58039450645447
Time of the indexing: 4.848579168319702
T_indexing = 43.60229158401489
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model12/checkpoint0099_scratch.pth and loaded with msg: <All keys matched successfully>
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.7801684620673849
top-5 accuracy :  0.8925338070135228
maj accuracy class :  0.7980747192298877
f1 score :  0.7801684620673849
t_tot: 95.9423725605011
t_model: 68.77846717834473
t_transfer: 0.5887730121612549
t_search: 23.354846715927124
-----------------------------------------------------------------------------------------------
------------------------------------- BYOL pre  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/byol_light/model19/epoch=99-step=500400.ckpt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.04793381690979
Time of the transfer: 34.69092655181885
Time of the indexing: 5.628227710723877
T_indexing = 46.619643211364746
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.6635915654366262
top-5 accuracy :  0.8864886545954619
maj accuracy class :  0.6949919779967912
f1 score :  0.6635915654366262
t_tot: 95.68443298339844
t_model: 70.01823115348816
t_transfer: 0.5107505321502686
t_search: 21.817981004714966
-----------------------------------------------------------------------------------------------
------------------------------------- BYOL fine  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/byol_light/model18/epoch=99-step=164900.ckpt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.920727014541626
Time of the transfer: 34.82320833206177
Time of the indexing: 5.049551725387573
T_indexing = 46.38146138191223
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.6355145542058217
top-5 accuracy :  0.8995530598212239
maj accuracy class :  0.6658262663305066
f1 score :  0.6355145542058217
t_tot: 93.66599702835083
t_model: 68.26486372947693
t_transfer: 0.5304489135742188
t_search: 21.585537672042847
-----------------------------------------------------------------------------------------------
------------------------------------- BYOL scratch  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/byol_light/model15/epoch=99-step=164900.ckpt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.9338953495025635
Time of the transfer: 34.78907299041748
Time of the indexing: 5.249413251876831
T_indexing = 46.06683850288391
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.768909007563603
top-5 accuracy :  0.9113282145312858
maj accuracy class :  0.7790224616089847
f1 score :  0.768909007563603
t_tot: 93.43803691864014
t_model: 68.05600714683533
t_transfer: 0.5101628303527832
t_search: 21.585832118988037
-----------------------------------------------------------------------------------------------
------------------------------------- iBOT pre  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model27/checkpoint_teacher.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model27/checkpoint_teacher.pth and loaded with msg: <All keys matched successfully>
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.595216989517212
Time of the transfer: 32.68647003173828
Time of the indexing: 4.684699058532715
T_indexing = 43.663113832473755
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model27/checkpoint_teacher.pth and loaded with msg: <All keys matched successfully>
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.7028707311482925
top-5 accuracy :  0.8715619986247994
maj accuracy class :  0.7159637863855145
f1 score :  0.7028707311482925
t_tot: 96.33850502967834
t_model: 69.15365958213806
t_transfer: 0.5855779647827148
t_search: 23.378161430358887
-----------------------------------------------------------------------------------------------
------------------------------------- iBOT fine  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model30/checkpointv1_99.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Take key teacher in provided checkpoint dict
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model30/checkpointv1_99.pth and loaded with msg: _IncompatibleKeys(missing_keys=[], unexpected_keys=['head.mlp.0.weight', 'head.mlp.0.bias', 'head.mlp.2.weight', 'head.mlp.2.bias', 'head.mlp.4.weight', 'head.mlp.4.bias', 'head.last_layer.weight_g', 'head.last_layer.weight_v', 'head.last_layer2.weight_g', 'head.last_layer2.weight_v'])
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.609691858291626
Time of the transfer: 32.6224946975708
Time of the indexing: 5.218034744262695
T_indexing = 43.877230167388916
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Take key teacher in provided checkpoint dict
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model30/checkpointv1_99.pth and loaded with msg: _IncompatibleKeys(missing_keys=[], unexpected_keys=['head.mlp.0.weight', 'head.mlp.0.bias', 'head.mlp.2.weight', 'head.mlp.2.bias', 'head.mlp.4.weight', 'head.mlp.4.bias', 'head.last_layer.weight_g', 'head.last_layer.weight_v', 'head.last_layer2.weight_g', 'head.last_layer2.weight_v'])
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.8138608755443503
top-5 accuracy :  0.9300366720146688
maj accuracy class :  0.8333715333486134
f1 score :  0.8138608755443503
t_tot: 96.90368866920471
t_model: 69.79450249671936
t_transfer: 0.5882828235626221
t_search: 23.30151605606079
-----------------------------------------------------------------------------------------------
------------------------------------- iBOT scratch  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model31/checkpointV0_0085.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Take key teacher in provided checkpoint dict
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model31/checkpointV0_0085.pth and loaded with msg: _IncompatibleKeys(missing_keys=[], unexpected_keys=['head.mlp.0.weight', 'head.mlp.0.bias', 'head.mlp.2.weight', 'head.mlp.2.bias', 'head.mlp.4.weight', 'head.mlp.4.bias', 'head.last_layer.weight_g', 'head.last_layer.weight_v', 'head.last_layer2.weight_g', 'head.last_layer2.weight_v'])
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.6027662754058838
Time of the transfer: 32.60794711112976
Time of the indexing: 4.893805980682373
T_indexing = 43.52847862243652
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Take key teacher in provided checkpoint dict
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model31/checkpointV0_0085.pth and loaded with msg: _IncompatibleKeys(missing_keys=[], unexpected_keys=['head.mlp.0.weight', 'head.mlp.0.bias', 'head.mlp.2.weight', 'head.mlp.2.bias', 'head.mlp.4.weight', 'head.mlp.4.bias', 'head.last_layer.weight_g', 'head.last_layer.weight_v', 'head.last_layer2.weight_g', 'head.last_layer2.weight_v'])
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.7956394682557874
top-5 accuracy :  0.9229028191611277
maj accuracy class :  0.824948429979372
f1 score :  0.7956394682557874
t_tot: 95.2731032371521
t_model: 68.34496259689331
t_transfer: 0.5815722942352295
t_search: 23.11329221725464
-----------------------------------------------------------------------------------------------
------------------------------------- RetCCL  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/retccl/model24/ret_pretrained.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.7869060039520264
Time of the transfer: 34.896113872528076
Time of the indexing: 6.046119689941406
T_indexing = 48.21781778335571
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.7903678661471465
top-5 accuracy :  0.8959145083658033
maj accuracy class :  0.7980460692184277
f1 score :  0.7903678661471465
t_tot: 114.65177917480469
t_model: 66.15144443511963
t_transfer: 0.6379756927490234
t_search: 44.558181285858154
-----------------------------------------------------------------------------------------------
------------------------------------- CDPath  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/cdpath/model33/CAMELYON17.ckpt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.0850725173950195
Time of the transfer: 1.2091219425201416
Time of the indexing: 8.545172214508057
T_indexing = 16.478922128677368
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.7300309420123768
top-5 accuracy :  0.9159695163878065
maj accuracy class :  0.7596264038505616
f1 score :  0.7300309420123768
t_tot: 62.20060157775879
t_model: 32.53649425506592
t_transfer: 0.5695235729217529
t_search: 25.763525247573853
-----------------------------------------------------------------------------------------------
------------------------------------- Phikon  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/phikon/model26/placeholder.txt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.4253482818603516
Time of the transfer: 87.448965549469
Time of the indexing: 5.066933870315552
T_indexing = 98.18932628631592
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.8091049736419894
top-5 accuracy :  0.918662617465047
maj accuracy class :  0.8382420352968141
f1 score :  0.8091049736419894
t_tot: 121.66098594665527
t_model: 69.82649898529053
t_transfer: 19.863938331604004
t_search: 28.562408447265625
-----------------------------------------------------------------------------------------------
------------------------------------- CTransPath  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ctranspath/model29/ctranspath.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.6630284786224365
Time of the transfer: 51.226616621017456
Time of the indexing: 4.960633277893066
T_indexing = 63.098915338516235
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.8015986706394682
top-5 accuracy :  0.9201237680495072
maj accuracy class :  0.825005730002292
f1 score :  0.8015986706394682
t_tot: 153.56891417503357
t_model: 119.65699195861816
t_transfer: 0.6302235126495361
t_search: 29.728566884994507
-----------------------------------------------------------------------------------------------
------------------------------------- Uni  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/uni/model32/placeholder.txt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
-----------------------------------------------------------------------------------------------
------------------------------------- Hoptimus  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/hoptimus/model34/placeholder.txt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
all
-----------------------------------------------------------------------------------------------
------------------------------------- Uni  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/uni/model32/placeholder.txt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
-----------------------------------------------------------------------------------------------
------------------------------------- Hoptimus  --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/hoptimus/model34/placeholder.txt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 5.278456211090088
Time of the transfer: 470.52404832839966
Time of the indexing: 5.883073568344116
T_indexing = 486.7029654979706
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9267132706853083
top-5 accuracy :  0.9676254870501948
maj accuracy class :  0.9338184735273894
f1 score :  0.9267132706853083
t_tot: 667.4866302013397
t_model: 0
t_transfer: 346.03085017204285
t_search: 45.48069977760315
