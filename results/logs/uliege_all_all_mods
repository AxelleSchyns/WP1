-----------------------------------------------------------------------------------------------
------------------------------------- Model 1 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/resnet/v9_alan/last_epoch
model: resnet
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 1.9900052547454834
Time of the transfer: 43.753679037094116
Time of the indexing: 4.316067695617676
T_indexing = 54.29959559440613
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.81829159]
top-5 accuracy :  [0.92922574]
top-1 accuracy proj :  [0.9449441]
top-5 accuracy proj :  [0.96637728]
top-1 accuracy sim :  [0.94574563]
top-5 accuracy sim :  [0.96718922]
maj accuracy class :  [0.84288926]
maj accuracy proj :  [0.94512106]
maj accuracy sim :  [0.94607874]
f1 score :  0.8182915911977182
t_tot: 693.9410889148712
t_model: 173.8160858154297
t_transfer: 1.754350185394287
t_search: 507.79840421676636
-----------------------------------------------------------------------------------------------
------------------------------------- Model 2 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/deit/version_18/last_epoch
modekl: deit
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 1.9294006824493408
Time of the transfer: 111.30898928642273
Time of the indexing: 4.29141640663147
T_indexing = 122.04830360412598
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.79771199]
top-5 accuracy :  [0.91947203]
top-1 accuracy proj :  [0.94207108]
top-5 accuracy proj :  [0.96219266]
top-1 accuracy sim :  [0.94230009]
top-5 accuracy sim :  [0.96238003]
maj accuracy class :  [0.8200508]
maj accuracy proj :  [0.94231049]
maj accuracy sim :  [0.94258114]
f1 score :  0.797711989673766
t_tot: 803.5783936977386
t_model: 183.44270133972168
t_transfer: 96.70775651931763
t_search: 512.4802350997925
-----------------------------------------------------------------------------------------------
------------------------------------- Model 3 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/Dino/Vit_pretrained/pretrained_vit_small_checkpoint.pth
Indexing
model: dino pre
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/Dino/Vit_pretrained/pretrained_vit_small_checkpoint.pth and loaded with msg: <All keys matched successfully>
Time of the model: 1.7504754066467285
Time of the transfer: 40.97096276283264
Time of the indexing: 4.549039840698242
T_indexing = 51.54523515701294
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/Dino/Vit_pretrained/pretrained_vit_small_checkpoint.pth and loaded with msg: <All keys matched successfully>
top-1 accuracy :  [0.75911353]
top-5 accuracy :  [0.90375367]
top-1 accuracy proj :  [0.93201549]
top-5 accuracy proj :  [0.9568734]
top-1 accuracy sim :  [0.93336873]
top-5 accuracy sim :  [0.95790394]
maj accuracy class :  [0.77018924]
maj accuracy proj :  [0.9329003]
maj accuracy sim :  [0.93479483]
f1 score :  0.7591135261174609
t_tot: 1697.6897995471954
t_model: 171.17802143096924
t_transfer: 5.329284429550171
t_search: 1510.0414299964905
-----------------------------------------------------------------------------------------------
------------------------------------- Model 5 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/Dino/Vit_scratch/checkpoint0099_scratch.pth
model: dino fine
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/Dino/Vit_scratch/checkpoint0099_scratch.pth and loaded with msg: <All keys matched successfully>
Time of the model: 1.8586418628692627
Time of the transfer: 40.73873019218445
Time of the indexing: 4.586179256439209
T_indexing = 51.47368907928467
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/Dino/Vit_scratch/checkpoint0099_scratch.pth and loaded with msg: <All keys matched successfully>
top-1 accuracy :  [0.77398872]
top-5 accuracy :  [0.89351071]
top-1 accuracy proj :  [0.92924656]
top-5 accuracy proj :  [0.94878521]
top-1 accuracy sim :  [0.93154706]
top-5 accuracy sim :  [0.95155414]
maj accuracy class :  [0.78359669]
maj accuracy proj :  [0.9286324]
maj accuracy sim :  [0.93134928]
f1 score :  0.7739887160910207
t_tot: 1753.8934626579285
t_model: 184.05800318717957
t_transfer: 4.429269790649414
t_search: 1553.8490221500397
-----------------------------------------------------------------------------------------------
------------------------------------- Model 4 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/Dino/Vit_pretrained/checkpoint0099_pretrained.pth
model: dino scratch
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/Dino/Vit_pretrained/checkpoint0099_pretrained.pth and loaded with msg: <All keys matched successfully>
Time of the model: 1.5991709232330322
Time of the transfer: 76.22907042503357
Time of the indexing: 4.2138283252716064
T_indexing = 93.75730586051941
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/Dino/Vit_pretrained/checkpoint0099_pretrained.pth and loaded with msg: <All keys matched successfully>
top-1 accuracy :  [0.76866946]
top-5 accuracy :  [0.88980493]
top-1 accuracy proj :  [0.9265505]
top-5 accuracy proj :  [0.94515229]
top-1 accuracy sim :  [0.92868445]
top-5 accuracy sim :  [0.94807736]
maj accuracy class :  [0.77751754]
maj accuracy proj :  [0.92590511]
maj accuracy sim :  [0.92843462]
f1 score :  0.7686694564153811
t_tot: 1861.958545923233
t_model: 193.70680451393127
t_transfer: 88.9454550743103
t_search: 1560.2369713783264
-----------------------------------------------------------------------------------------------
------------------------------------- Model 14 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/byol_light/epoch=99-step=500400.ckpt
byol pre
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 2.0283377170562744
Time of the transfer: 43.819953203201294
Time of the indexing: 4.4647088050842285
T_indexing = 54.59827971458435
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.63804051]
top-5 accuracy :  [0.84318073]
top-1 accuracy proj :  [0.80792372]
top-5 accuracy proj :  [0.91746299]
top-1 accuracy sim :  [0.84283722]
top-5 accuracy sim :  [0.95146045]
maj accuracy class :  [0.62600712]
maj accuracy proj :  [0.79970021]
maj accuracy sim :  [0.84630358]
f1 score :  0.63804051381342
t_tot: 1211.9838252067566
t_model: 175.94936180114746
t_transfer: 1.6802897453308105
t_search: 1023.0666646957397
-----------------------------------------------------------------------------------------------
------------------------------------- Model 7 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/byol_light/v1_alan/epoch=45-step=75854.ckpt
byol fine
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 2.0313100814819336
Time of the transfer: 43.86087703704834
Time of the indexing: 4.375253915786743
T_indexing = 54.37724232673645
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.74492536]
top-5 accuracy :  [0.89488477]
top-1 accuracy proj :  [0.93544022]
top-5 accuracy proj :  [0.95276164]
top-1 accuracy sim :  [0.93637707]
top-5 accuracy sim :  [0.95327171]
maj accuracy class :  [0.76310037]
maj accuracy proj :  [0.93758458]
maj accuracy sim :  [0.93986426]
f1 score :  0.744925363812379
t_tot: 1205.686773777008
t_model: 173.46101713180542
t_transfer: 1.5919959545135498
t_search: 1019.4626746177673
-----------------------------------------------------------------------------------------------
------------------------------------- Model 6 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/byol_light/v2_alan/epoch=67-step=112132.ckpt
model: byol scratch
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 2.0743958950042725
Time of the transfer: 43.85006237030029
Time of the indexing: 4.369504690170288
T_indexing = 54.332016468048096
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.74468595]
top-5 accuracy :  [0.89406242]
top-1 accuracy proj :  [0.93615847]
top-5 accuracy proj :  [0.95103366]
top-1 accuracy sim :  [0.93644994]
top-5 accuracy sim :  [0.95125226]
maj accuracy class :  [0.76483876]
maj accuracy proj :  [0.93724106]
maj accuracy sim :  [0.93758458]
f1 score :  0.7446859450794245
t_tot: 1196.6228241920471
t_model: 171.0121374130249
t_transfer: 1.6154236793518066
t_search: 1012.8801140785217
-----------------------------------------------------------------------------------------------
------------------------------------- Model 12 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/ibot/vit_small_backbone/checkpoint_teacher.pth
ibot pre
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/ibot/vit_small_backbone/checkpoint_teacher.pth and loaded with msg: <All keys matched successfully>
Time of the model: 1.7507648468017578
Time of the transfer: 40.85223054885864
Time of the indexing: 4.5776941776275635
T_indexing = 51.69162392616272
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/ibot/vit_small_backbone/checkpoint_teacher.pth and loaded with msg: <All keys matched successfully>
top-1 accuracy :  [0.75779152]
top-5 accuracy :  [0.9050965]
top-1 accuracy proj :  [0.9287469]
top-5 accuracy proj :  [0.95582204]
top-1 accuracy sim :  [0.93150542]
top-5 accuracy sim :  [0.95847646]
maj accuracy class :  [0.77052235]
maj accuracy proj :  [0.92948598]
maj accuracy sim :  [0.93324381]
f1 score :  0.7577915183311473
t_tot: 1729.187133550644
t_model: 177.58040618896484
t_transfer: 5.12961220741272
t_search: 1534.9782769680023
-----------------------------------------------------------------------------------------------
------------------------------------- Model 11 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/ibot/finetuned/checkpoint_new.pth
ibot fine
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 1.7110443115234375
Time of the transfer: 40.84825348854065
Time of the indexing: 4.430325984954834
T_indexing = 51.740254640579224
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Take key teacher in provided checkpoint dict
top-1 accuracy :  [0.76768055]
top-5 accuracy :  [0.89040868]
top-1 accuracy proj :  [0.92544709]
top-5 accuracy proj :  [0.94365332]
top-1 accuracy sim :  [0.92646722]
top-5 accuracy sim :  [0.94495451]
maj accuracy class :  [0.77751754]
maj accuracy proj :  [0.9243645]
maj accuracy sim :  [0.92546791]
f1 score :  0.767680552953178
t_tot: 1691.0158247947693
t_model: 169.05542826652527
t_transfer: 6.4206390380859375
t_search: 1504.5410656929016
-----------------------------------------------------------------------------------------------
------------------------------------- Model 13 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/ibot/scratch_vit_small/checkpoint24.pth
ibot scratch
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 1.7628834247589111
Time of the transfer: 40.84151864051819
Time of the indexing: 4.512364625930786
T_indexing = 51.40019488334656
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.75905107]
top-5 accuracy :  [0.8914184]
top-1 accuracy proj :  [0.93284825]
top-5 accuracy proj :  [0.94892053]
top-1 accuracy sim :  [0.93318135]
top-5 accuracy sim :  [0.94937855]
maj accuracy class :  [0.76903379]
maj accuracy proj :  [0.93236941]
maj accuracy sim :  [0.9327962]
f1 score :  0.7590510690566902
t_tot: 1695.9113404750824
t_model: 170.755868434906
t_transfer: 5.536509990692139
t_search: 1508.7672894001007
-----------------------------------------------------------------------------------------------
------------------------------------- Model 8 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/ret/ret_pretrained.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 1.784527063369751
Time of the transfer: 43.95775389671326
Time of the indexing: 4.8112452030181885
T_indexing = 55.30850338935852
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.73683717]
top-5 accuracy :  [0.87642871]
top-1 accuracy proj :  [0.89440593]
top-5 accuracy proj :  [0.93397248]
top-1 accuracy sim :  [0.90829222]
top-5 accuracy sim :  [0.94764016]
maj accuracy class :  [0.73846106]
maj accuracy proj :  [0.89148086]
maj accuracy sim :  [0.90698062]
f1 score :  0.7368371744425707
t_tot: 8213.854063034058
t_model: 164.46890211105347
t_transfer: 2.0586652755737305
t_search: 8034.835449934006
-----------------------------------------------------------------------------------------------
------------------------------------- Model 15 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/cdpath/CAMELYON17.ckpt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 2.2712900638580322
Time of the transfer: 1.721350908279419
Time of the indexing: 7.902901649475098
T_indexing = 27.62345862388611
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.58394229]
top-5 accuracy :  [0.78752108]
top-1 accuracy proj :  [0.7352237]
top-5 accuracy proj :  [0.87600192]
top-1 accuracy sim :  [0.80466554]
top-5 accuracy sim :  [0.93409739]
maj accuracy class :  [0.57006641]
maj accuracy proj :  [0.7276664]
maj accuracy sim :  [0.80915204]
f1 score :  0.5839422896758478
t_tot: 2123.7881178855896
t_model: 91.21528935432434
t_transfer: 1.7113633155822754
t_search: 2019.0886235237122
-----------------------------------------------------------------------------------------------
------------------------------------- Model 9 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: phikon
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 1.5965609550476074
Time of the transfer: 108.87852740287781
Time of the indexing: 4.505414724349976
T_indexing = 119.70378708839417
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.78046343]
top-5 accuracy :  [0.89358358]
top-1 accuracy proj :  [0.94293507]
top-5 accuracy proj :  [0.95357358]
top-1 accuracy sim :  [0.94377824]
top-5 accuracy sim :  [0.95390669]
maj accuracy class :  [0.78931152]
maj accuracy proj :  [0.94361168]
maj accuracy sim :  [0.94444444]
f1 score :  0.7804634313909188
t_tot: 3303.0549924373627
t_model: 167.5190851688385
t_transfer: 102.77178144454956
t_search: 3020.9700610637665
-----------------------------------------------------------------------------------------------
------------------------------------- Model 10 --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/cbir-tfe/weights_folder/ctranspath/ctranspath.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Time of the model: 2.952589511871338
Time of the transfer: 64.10218667984009
Time of the indexing: 4.4595417976379395
T_indexing = 75.93994283676147
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
top-1 accuracy :  [0.76423501]
top-5 accuracy :  [0.89442675]
top-1 accuracy proj :  [0.92549914]
top-5 accuracy proj :  [0.94836883]
top-1 accuracy sim :  [0.93284825]
top-5 accuracy sim :  [0.9536985]
maj accuracy class :  [0.77407199]
maj accuracy proj :  [0.92605084]
maj accuracy sim :  [0.93347282]
f1 score :  0.76423500510066
t_tot: 3291.382701396942
t_model: 277.4861853122711
t_transfer: 2.461099147796631
t_search: 2999.4964864254

-----------------------------------------------------------------------------------------------
------------------------------------- Model 16 --------------------------------------------------
-----------------------------------------------------------------------------
uni
Time of the model: 2.420621156692505
Time of the transfer: 364.50170254707336
Time of the indexing: 4.044762849807739
T_indexing = 375.6201033592224
all
top-1 accuracy :  [0.79337122]
top-5 accuracy :  [0.907397]
top-1 accuracy proj :  [0.93919805]
top-5 accuracy proj :  [0.95464576]
top-1 accuracy sim :  [0.94515229]
top-5 accuracy sim :  [0.95734183]
maj accuracy class :  [0.8077884]
maj accuracy proj :  [0.94079071]
maj accuracy sim :  [0.94617242]
f1 score :  0.7933712239502009
t_tot: 4729.12295627594
t_model: 268.5908110141754
t_transfer: 386.6573712825775
t_search: 4063.0836136341095
weighted

