-----------------------------------------------------------------------------------------------
------------------------------------- ResNet --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/resnet/model2/last_epoch
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.355154514312744
Time of the transfer: 41.37243580818176
Time of the indexing: 5.877455949783325
T_indexing = 55.35476541519165
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.8268802228412256
top-5 accuracy :  0.9378830083565459
maj accuracy class :  0.8378830083565459
f1 score :  0.8268802228412256
t_tot: 21.21327519416809
t_model: 15.78844141960144
t_transfer: 0.18228673934936523
t_search: 4.568411827087402
-----------------------------------------------------------------------------------------------
------------------------------------- DeiT --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/deit/model5/last_epoch
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.1281628608703613
Time of the transfer: 107.57591581344604
Time of the indexing: 5.522231817245483
T_indexing = 120.21156477928162
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.8158774373259053
top-5 accuracy :  0.9284122562674094
maj accuracy class :  0.8250696378830084
f1 score :  0.8158774373259053
t_tot: 28.4064359664917
t_model: 18.178706884384155
t_transfer: 4.733998775482178
t_search: 4.795462608337402
-----------------------------------------------------------------------------------------------
------------------------------------- DINO pre --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model11/dino_deitsmall16_pretrain.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model11/dino_deitsmall16_pretrain.pth and loaded with msg: <All keys matched successfully>
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.8370139598846436
Time of the transfer: 39.10036611557007
Time of the indexing: 5.745438098907471
T_indexing = 52.197458028793335
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model11/dino_deitsmall16_pretrain.pth and loaded with msg: <All keys matched successfully>
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9286908077994429
top-5 accuracy :  0.9782729805013928
maj accuracy class :  0.9380222841225627
f1 score :  0.9286908077994429
t_tot: 24.444708108901978
t_model: 18.02499532699585
t_transfer: 0.27321314811706543
t_search: 5.476385831832886
-----------------------------------------------------------------------------------------------
------------------------------------- DINO fine --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model13/checkpoint0099_pretrained.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model13/checkpoint0099_pretrained.pth and loaded with msg: <All keys matched successfully>
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.9467287063598633
Time of the transfer: 39.010130643844604
Time of the indexing: 5.93147611618042
T_indexing = 52.121849060058594
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model13/checkpoint0099_pretrained.pth and loaded with msg: <All keys matched successfully>
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9438718662952646
top-5 accuracy :  0.9800835654596101
maj accuracy class :  0.9488857938718663
f1 score :  0.9438718662952646
t_tot: 21.030091285705566
t_model: 14.912849426269531
t_transfer: 0.21857070922851562
t_search: 5.240042686462402
-----------------------------------------------------------------------------------------------
------------------------------------- DINO scratch --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model12/checkpoint0099_scratch.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model12/checkpoint0099_scratch.pth and loaded with msg: <All keys matched successfully>
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.7929375171661377
Time of the transfer: 39.106740951538086
Time of the indexing: 5.7248735427856445
T_indexing = 51.526326179504395
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/Dino/model12/checkpoint0099_scratch.pth and loaded with msg: <All keys matched successfully>
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9540389972144847
top-5 accuracy :  0.9834261838440111
maj accuracy class :  0.9604456824512535
f1 score :  0.9540389972144847
t_tot: 25.046064853668213
t_model: 18.420960664749146
t_transfer: 0.24982190132141113
t_search: 5.684157133102417
-----------------------------------------------------------------------------------------------
------------------------------------- BYOL pre --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/byol_light/model19/epoch=99-step=500400.ckpt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.9965147972106934
Time of the transfer: 41.205347537994385
Time of the indexing: 4.958114862442017
T_indexing = 53.1410608291626
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.7093314763231198
top-5 accuracy :  0.9029247910863509
maj accuracy class :  0.7041782729805014
f1 score :  0.7093314763231198
t_tot: 20.417261123657227
t_model: 14.805081605911255
t_transfer: 0.16324496269226074
t_search: 4.769964694976807
-----------------------------------------------------------------------------------------------
------------------------------------- BYOL fine --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/byol_light/model18/epoch=99-step=164900.ckpt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.0097320079803467
Time of the transfer: 41.16557502746582
Time of the indexing: 4.975531578063965
T_indexing = 53.038103103637695
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.7986072423398328
top-5 accuracy :  0.9306406685236769
maj accuracy class :  0.8080779944289693
f1 score :  0.7986072423398328
t_tot: 22.031073570251465
t_model: 16.279149055480957
t_transfer: 0.15885353088378906
t_search: 4.924224615097046
-----------------------------------------------------------------------------------------------
------------------------------------- BYOL scratch --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/byol_light/model15/epoch=99-step=164900.ckpt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.881716251373291
Time of the transfer: 41.19254684448242
Time of the indexing: 4.871589422225952
T_indexing = 53.11062169075012
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.8112813370473537
top-5 accuracy :  0.9311977715877438
maj accuracy class :  0.8155988857938719
f1 score :  0.8112813370473537
t_tot: 22.885908126831055
t_model: 17.07481598854065
t_transfer: 0.15627646446228027
t_search: 4.984830379486084
-----------------------------------------------------------------------------------------------
------------------------------------- iBOT pre --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model27/checkpoint_teacher.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model27/checkpoint_teacher.pth and loaded with msg: <All keys matched successfully>
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.0740721225738525
Time of the transfer: 38.157636404037476
Time of the indexing: 6.256758451461792
T_indexing = 51.463175535202026
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model27/checkpoint_teacher.pth and loaded with msg: <All keys matched successfully>
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9235376044568245
top-5 accuracy :  0.9777158774373259
maj accuracy class :  0.9298050139275766
f1 score :  0.9235376044568245
t_tot: 24.51392650604248
t_model: 18.187259197235107
t_transfer: 0.19287657737731934
t_search: 5.477377891540527
-----------------------------------------------------------------------------------------------
------------------------------------- iBOT fine --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model30/checkpointv1_99.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Take key teacher in provided checkpoint dict
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model30/checkpointv1_99.pth and loaded with msg: _IncompatibleKeys(missing_keys=[], unexpected_keys=['head.mlp.0.weight', 'head.mlp.0.bias', 'head.mlp.2.weight', 'head.mlp.2.bias', 'head.mlp.4.weight', 'head.mlp.4.bias', 'head.last_layer.weight_g', 'head.last_layer.weight_v', 'head.last_layer2.weight_g', 'head.last_layer2.weight_v'])
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.8226451873779297
Time of the transfer: 38.39042639732361
Time of the indexing: 5.7072913646698
T_indexing = 50.73313570022583
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Take key teacher in provided checkpoint dict
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model30/checkpointv1_99.pth and loaded with msg: _IncompatibleKeys(missing_keys=[], unexpected_keys=['head.mlp.0.weight', 'head.mlp.0.bias', 'head.mlp.2.weight', 'head.mlp.2.bias', 'head.mlp.4.weight', 'head.mlp.4.bias', 'head.last_layer.weight_g', 'head.last_layer.weight_v', 'head.last_layer2.weight_g', 'head.last_layer2.weight_v'])
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9491643454038997
top-5 accuracy :  0.9841225626740947
maj accuracy class :  0.9593314763231198
f1 score :  0.9491643454038997
t_tot: 22.087944507598877
t_model: 16.029008150100708
t_transfer: 0.18704962730407715
t_search: 5.221068859100342
-----------------------------------------------------------------------------------------------
------------------------------------- iBOT scratch --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model31/checkpointV0_0085.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Take key teacher in provided checkpoint dict
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model31/checkpointV0_0085.pth and loaded with msg: _IncompatibleKeys(missing_keys=[], unexpected_keys=['head.mlp.0.weight', 'head.mlp.0.bias', 'head.mlp.2.weight', 'head.mlp.2.bias', 'head.mlp.4.weight', 'head.mlp.4.bias', 'head.last_layer.weight_g', 'head.last_layer.weight_v', 'head.last_layer2.weight_g', 'head.last_layer2.weight_v'])
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.8473529815673828
Time of the transfer: 38.38199162483215
Time of the indexing: 5.781094312667847
T_indexing = 50.661264181137085
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Take key teacher in provided checkpoint dict
Pretrained weights found at /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ibot/model31/checkpointV0_0085.pth and loaded with msg: _IncompatibleKeys(missing_keys=[], unexpected_keys=['head.mlp.0.weight', 'head.mlp.0.bias', 'head.mlp.2.weight', 'head.mlp.2.bias', 'head.mlp.4.weight', 'head.mlp.4.bias', 'head.last_layer.weight_g', 'head.last_layer.weight_v', 'head.last_layer2.weight_g', 'head.last_layer2.weight_v'])
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9427576601671309
top-5 accuracy :  0.9782729805013928
maj accuracy class :  0.9513927576601672
f1 score :  0.9427576601671309
t_tot: 22.99965238571167
t_model: 16.795007944107056
t_transfer: 0.22394371032714844
t_search: 5.323171138763428
-----------------------------------------------------------------------------------------------
------------------------------------- RetCCL --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/retccl/model24/ret_pretrained.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.2636349201202393
Time of the transfer: 41.689231872558594
Time of the indexing: 8.00195837020874
T_indexing = 57.85895824432373
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.914066852367688
top-5 accuracy :  0.973816155988858
maj accuracy class :  0.9229805013927577
f1 score :  0.914066852367688
t_tot: 33.22888898849487
t_model: 21.124847173690796
t_transfer: 0.19181537628173828
t_search: 11.21194314956665
-----------------------------------------------------------------------------------------------
------------------------------------- CDPath --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/cdpath/model33/CAMELYON17.ckpt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.777756690979004
Time of the transfer: 1.8213067054748535
Time of the indexing: 8.191040754318237
T_indexing = 18.218400955200195
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.5285515320334262
top-5 accuracy :  0.777715877437326
maj accuracy class :  0.48844011142061283
f1 score :  0.5285515320334262
t_tot: 12.83739161491394
t_model: 6.731497287750244
t_transfer: 0.1337904930114746
t_search: 5.287596225738525
-----------------------------------------------------------------------------------------------
------------------------------------- Phikon --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/phikon/model26/placeholder.txt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 1.5562729835510254
Time of the transfer: 102.93794322013855
Time of the indexing: 5.416825294494629
T_indexing = 114.80281090736389
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9504178272980501
top-5 accuracy :  0.9760445682451253
maj accuracy class :  0.9573816155988858
f1 score :  0.9504178272980501
t_tot: 34.00728368759155
t_model: 23.524208784103394
t_transfer: 2.4918100833892822
t_search: 7.276723861694336
-----------------------------------------------------------------------------------------------
------------------------------------- CTransPath --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/ctranspath/model29/ctranspath.pth
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 3.1022751331329346
Time of the transfer: 61.67479920387268
Time of the indexing: 6.29522442817688
T_indexing = 76.37389063835144
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9605849582172702
top-5 accuracy :  0.9845403899721449
maj accuracy class :  0.963091922005571
f1 score :  0.9605849582172702
t_tot: 44.61998200416565
t_model: 36.19912934303284
t_transfer: 0.23714232444763184
t_search: 7.436798810958862
-----------------------------------------------------------------------------------------------
------------------------------------- Uni --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/uni/model32/uni
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 2.7969961166381836
Time of the transfer: 344.676061630249
Time of the indexing: 5.223586082458496
T_indexing = 358.3219385147095
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.9598885793871866
top-5 accuracy :  0.9725626740947075
maj accuracy class :  0.9646239554317548
f1 score :  0.9598885793871866
t_tot: 60.494869232177734
t_model: 39.96651005744934
t_transfer: 11.444506406784058
t_search: 8.398269891738892
-----------------------------------------------------------------------------------------------
------------------------------------- Hoptimus --------------------------------------------------
-----------------------------------------------------------------------------------------------
Weights: /home/labsig/Documents/Axelle/cytomine/WP1/weights_folder/hoptimus/model34/placeholder.txt
Indexing
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Transferring index to GPU
Index transferred to GPU
Time of the model: 5.067202091217041
Time of the transfer: 543.886693239212
Time of the indexing: 6.029959201812744
T_indexing = 560.6480467319489
all
Model vit_small 16x16 built.
Model vit_base 16x16 built.
Loading FAISS index from file
Transferring index to GPU
Index transferred to GPU
top-1 accuracy :  0.942200557103064
top-5 accuracy :  0.9657381615598886
maj accuracy class :  0.9467966573816156
f1 score :  0.942200557103064
t_tot: 137.86703944206238
t_model: 0
t_transfer: 73.30090045928955
t_search: 10.209122896194458
